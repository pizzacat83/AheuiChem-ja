/*! aheuichem 2015-09-02 */

!function a(a,b,c){function d(e,j){if(!b[e]){if(!a[e]){var h="function"==typeof require&&require;if(!j&&h)return h(e,!0);if(f)return f(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var g=b[e]={exports:{}};a[e][0].call(g.exports,function(b){var c=a[e][1][b];return d(c?c:b)},g,g.exports,a,a,b,c)}return b[e].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(b,c,f){function a(a,b,c,d,e,f){this.tile=a,this.data=d,this.tileX=b,this.tileY=c,this.renderer=e,this.callback=f}var d=b("./parser"),e=b("./interpreter");a.prototype.exec=function(){this.before={};for(var a in this.data)this.before[a]=this.tile[a],this.tile[a]=this.data[a];this.update()},a.prototype.undo=function(){for(var a in this.before)this.tile[a]=this.before[a];this.update()},a.prototype.update=function(){var a=e.CommandMap[this.tile.command];null!=a&&a.argument&&null==this.tile.data&&(this.tile.data=0),"push"==this.tile.command&&this.tile.data>9&&(this.tile.data=0),this.tile.original=d.encodeSyllable(this.tile),this.renderer.map.set(this.tileX,this.tileY,this.tile),this.renderer.updateTile(this.tileX,this.tileY),this.callback&&this.callback()},c.exports=a},{"./interpreter":7,"./parser":13}],2:[function(c,b,d){function a(a,f,d,e){for(this.layers=[],this.layersByName={},this.layerContexts=[],this.layerContextsByName={},this.width=d,this.height=e,this.viewport=a,a.style.position="relative",a.style.width=d+"px",a.style.height=e+"px";a.firstChild;)a.removeChild(a.firstChild);for(var c=0;c<f.length;++c){var g=f[c],b=document.createElement("canvas");b.width=d,b.height=e,b.style.position="absolute";var h=b.getContext("2d");this.layers[c]=b,this.layersByName[g]=b,this.layerContexts[c]=h,this.layerContextsByName[g]=h,a.appendChild(b)}}a.prototype.setSize=function(a,b){this.viewport.style.width=a+"px",this.viewport.style.height=b+"px",this.width=a,this.height=b;for(var c=0;c<this.layers.length;++c){var d=this.layers[c];d.width=a,d.height=b}},a.prototype.get=function(a){return this.layerContextsByName[a]},a.prototype.getCanvas=function(a){return this.layersByName[a]},a.prototype.forEach=function(a,b){this.layerContexts.forEach(a,b)},a.prototype.canvasForEach=function(a,b){this.layers.forEach(a,b)},a.prototype.dump=function(a){var b=a.getContext("2d");a.width=this.width,a.height=this.height,this.canvasForEach(function(a){b.drawImage(a,0,0)})},b.exports=a},{}],3:[function(b,l,p){function d(a,b,c,d,e,f,g,h){this.container=a,this.element=b,this.pushElement=c,this.finalElement=d,this.hideEvent=this.hide.bind(this),this.init(),this.renderer=e,this.clickCallback=f,this.keyboard=g,this.undomachine=h,this.tileX=null,this.tileY=null,this.tile=null,this.clipboard={}}var f=b("./table"),e=b("./tilemap"),c=b("./keyboard"),h=b("./hangul"),a=(b("./parser"),b("./action")),j=b("./interpreter"),k=[[{name:"복사",exec:function(){this.clipboard={command:this.tile.command,direction:this.tile.direction,data:this.tile.data}}},{name:"자르기",exec:function(){this.clipboard={command:this.tile.command,direction:this.tile.direction,data:this.tile.data},this.undomachine.run(new a(this.tile,this.tileX,this.tileY,{command:"none",direction:"none",breakpoint:!1},this.renderer))}},{name:"붙이기",exec:function(){this.undomachine.run(new a(this.tile,this.tileX,this.tileY,this.clipboard,this.renderer))}},{name:"중단점",exec:function(){this.undomachine.run(new a(this.tile,this.tileX,this.tileY,{breakpoint:!this.tile.breakpoint},this.renderer))}}]],i=[[0,2,3,4,5],[6,7,8,9]],g=[" ㄱㄴㄷㄹㄲㄳㄵㄶ".split(""),"ㅁㅂㅅㅇㅈㄺㄻㄼㄽ".split(""),"ㅊㅋㅌㅍㅎㄾㄿㅀㅄㅆ".split("")],m=c.createKeyMap(k,c.KeyNumberLayout),n=c.createKeyMap(i),o=c.createKeyMap(g);d.prototype.update=function(){this.clickCallback&&this.clickCallback(this.tileX,this.tileY,this.tile)},d.prototype.init=function(){var b=this;b.container.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var d=e.fromArray(i),j=document.getElementById("push-table"),d=(new f(j,d,function(d,e,g,h){if(null==e)return void d.parentNode.removeChild(d);d.id="push-table-"+e,d.appendChild(document.createTextNode(e));var f=document.createElement("div");f.className="key",f.appendChild(document.createTextNode(c.KeyLayout[h][g])),d.appendChild(f),d.addEventListener("click",function(){b.undomachine.run(new a(b.tile,b.tileX,b.tileY,{data:e},b.renderer)),b.update()})}),e.fromArray(g)),j=document.getElementById("final-table"),d=(new f(j,d,function(d,e,g,i){if(null==e)return void d.parentNode.removeChild(d);d.id="final-table-"+e,d.appendChild(document.createTextNode(e));var f=document.createElement("div");f.className="key",f.appendChild(document.createTextNode(c.KeyShiftLayout[i][g])),d.appendChild(f),d.addEventListener("click",function(){b.undomachine.run(new a(b.tile,b.tileX,b.tileY,{data:h["final"].indexOf(e)},b.renderer)),b.update()})}),e.fromArray(k)),j=document.getElementById("utility-table");new f(j,d,function(a,d,f,g){if(null==d)return void a.parentNode.removeChild(a);a.id="utility-table-"+d,a.appendChild(document.createTextNode(d.name));var e=document.createElement("div");e.className="key",e.appendChild(document.createTextNode(c.KeyNumberLayout[g][f])),a.appendChild(e),a.addEventListener("click",function(){d.exec.call(b),b.update()})})},d.prototype.show=function(c,d){var b=this;this.container.style.display="block",this.element.style.display="block",setTimeout(function(){b.element.style.top=d+"px",b.element.style.left=Math.max(0,Math.min(window.innerWidth-b.element.offsetWidth,c-b.element.offsetWidth/2+b.renderer.width/2))+"px",b.container.addEventListener("click",b.hideEvent),b.container.addEventListener("contextmenu",b.hideEvent)},0);var b=this;this.keyboard.push(null),this.keyboard.push({map:m,callback:function(a){a.exec.call(b),b.update(),b.hide()}}),"push"==this.tile.command?(this.finalElement.style.display="none",this.pushElement.style.display="block",this.keyboard.push({map:n,callback:function(c){b.undomachine.run(new a(b.tile,b.tileX,b.tileY,{data:c},b.renderer)),b.update(),b.hide()}})):j.CommandMap[this.tile.command]&&j.CommandMap[this.tile.command].argument?(this.finalElement.style.display="block",this.pushElement.style.display="none",this.keyboard.push({map:o,callback:function(c){b.undomachine.run(new a(b.tile,b.tileX,b.tileY,{data:h["final"].indexOf(c)},b.renderer)),b.update(),b.hide()}})):(this.finalElement.style.display="none",this.pushElement.style.display="none",this.keyboard.push(null))},d.prototype.hide=function(a){return this.container.removeEventListener("click",this.hideEvent),this.container.removeEventListener("contextmenu",this.hideEvent),this.container.style.display="none",this.element.style.display="none",this.keyboard.pop(),this.keyboard.pop(),this.keyboard.pop(),a?(a.preventDefault(),!1):void 0},l.exports=d},{"./action":1,"./hangul":5,"./interpreter":7,"./keyboard":8,"./parser":13,"./table":19,"./tilemap":20}],4:[function(u,p,t){function r(a,d,b,p,k,h){var n=d.get(a.x,a.y);if(o(b.x,b.y)){var e=c(a.y,j(b.y),d.height),l=c(a.x,j(b.x),d.getWidth(e)),m=d.get(l,e);k.push({x:l,y:e}),b.x?f(m,"skip-horizontal",h):f(m,"skip-vertical",h)}k.push({x:a.x,y:a.y});var q=p|i(b.x,b.y);f(n,g[q],h),a.y=c(a.y,b.y,d.height),a.x=c(a.x,b.x,d.getWidth(a.y))}function j(a){return a>0?1:0>a?-1:0}function o(a,b){return Math.abs(a)>=2||Math.abs(b)>=2}function q(b,a){return 1e3==a?b:-1e3==a?-b:a}function c(a,c,b){return 0==c?a:(a+=c,0>a&&(a=Math.max(0,b+a)),a>=b&&(a=Math.min(b-1,a-b)),a)}function i(f,g,h){var c=0;return h&&-2==g?k:h&&2==g?l:h&&-2==f?m:h&&2==f?n:(-1>=g&&(c|=e),g>=1&&(c|=a),-1>=f&&(c|=d),f>=1&&(c|=b),c)}function f(a,c,b){-1!=b&&null!=a&&(null==a.directions&&(a.directions=[]),null==a.directions[b]&&(a.directions[b]=[]),-1==a.directions[b].indexOf(c)&&a.directions[b].push(c))}var s={up:{x:0,y:-1},left:{x:-1,y:0},right:{x:1,y:0},down:{x:0,y:1},"skip-up":{x:0,y:-2},"skip-left":{x:-2,y:0},"skip-right":{x:2,y:0},"skip-down":{x:0,y:2},horizontal:{x:1e3,y:-1e3},vertical:{x:-1e3,y:1e3},reverse:{x:-1e3,y:-1e3},none:{x:1e3,y:1e3}},e=1,a=2,d=4,b=8,k=16,l=32,m=64,n=128,h={up:e,down:a,left:d,right:b,horizontal:d|b,vertical:e|a,"up-left":e|d,"down-left":a|d,"up-right":e|b,"down-right":a|b,"skip-up":k,"skip-down":l,"skip-left":m,"skip-right":n},g={};Object.keys(h).forEach(function(a){g[h[a]]=a}),p.exports={map:s,bitMap:h,bitRevMap:g,process:r,calculate:q,move:c,convertToBits:i,write:f}},{}],5:[function(c,a,d){var b={initial:"ㄱㄲㄴㄷㄸㄹㅁㅂㅃㅅㅆㅇㅈㅉㅊㅋㅌㅍㅎ".split(""),medial:"ㅏㅐㅑㅒㅓㅔㅕㅖㅗㅘㅙㅚㅛㅜㅝㅞㅟㅠㅡㅢㅣ".split(""),"final":" ㄱㄲㄳㄴㄵㄶㄷㄹㄺㄻㄼㄽㄾㄿㅀㅁㅂㅄㅅㅆㅇㅈㅊㅋㅌㅍㅎ".split(""),code:44032};a.exports=b},{}],6:[function(c,F,G){function k(g){if(!g&&a)if(b.trim())a.reset();else for(var c=0;c<b.map.height;++c)for(var d=0;d<b.map.width;++d){var e=b.map.get(d,c),i=a.cacheMap.get(d,c);e&&(e.directions=[],e.segments={},i.directions={})}var j=b.map.width*b.map.height*80;f=new w(b.map);for(var h=0;j>h&&f.next();++h);f.postCheck(),!g&&a&&a.redraw(),window.predictor=f}function o(c){c||(b.reset(),a.reset()),document.getElementById("codeForm-output").value="",b.push(document.getElementById("codeForm-input").value),e.playing=!1,e.running=!1,e.update(),document.activeElement.blur()}function t(){return n?(l.renderer=a,i.renderer=a,h.renderer=a,g.renderer=a,e.renderer=a,void(e.interpreter=b)):(d=new D(function(){document.getElementById("icon-undo").className="icon"+(d.undoStack.length>0?"":" disabled"),document.getElementById("icon-redo").className="icon"+(d.redoStack.length>0?"":" disabled")}),e=new B(b,a,function(){document.getElementById("codeForm-output").value+=b.shift(),document.getElementById("codeForm-debug").value=m.getStatus()},o.bind(this,!1)),i=new y(a),l=new s(a,document.getElementById("view-table")),l.trim=function(){b.trim(!0),a.reset(),k(!1)},g=new A(document.getElementById("context-bg"),document.getElementById("context"),document.getElementById("context-push"),document.getElementById("context-final"),a),r=new C(["menu-import","menu-status","menu-help"].map(function(a){return document.getElementById(a)}),["menu-btn-import","menu-btn-status","menu-btn-help"].map(function(a){return document.getElementById(a)})),h=new z(document.getElementById("viewport"),i,a,g,d),h.checkCallback=function(){return!e.running},h.clickCallback=k.bind(this,!1),j=new q,j.push({map:{z:function(){d.undo()},y:function(){d.redo()}," ":function(){e.playing=!0,e.running=!e.running,e.update()}},callback:function(a){a()}}),j.push({map:q.EditorKeyMapping,callback:function(a){i.changeSelected(a[0],a[1])}}),g.keyboard=j,g.undomachine=d,void(n=!0))}function p(c){b=new v(c),m=new x(b),k(!0),a=new u(document.getElementById("canvas"),b),t(),d.reset(),window.undomachine=d,window.interpreter=b,window.predictor=f,o(!0)}var b,a,f,m,i,h,g,e,j,d,r,l,E=c("./parser"),u=c("./renderer"),v=c("./interpreter"),w=c("./predictor"),x=c("./monitor"),y=c("./toolbox"),z=c("./viewport"),A=c("./contextmenu"),B=c("./playback"),q=c("./keyboard"),D=c("./undomachine"),C=c("./menupane"),s=c("./layertoggler"),n=!1;window.onload=function(){p(" "),document.getElementById("codeForm").onsubmit=function(){var a=document.getElementById("codeForm-code").value;return p(a),!1},document.getElementById("codeForm-export").onclick=function(){document.getElementById("codeForm-code").value=E.encode(b.map)},document.getElementById("icon-undo").onclick=function(){d.undo()},document.getElementById("icon-redo").onclick=function(){d.redo()}}},{"./contextmenu":3,"./interpreter":7,"./keyboard":8,"./layertoggler":9,"./menupane":11,"./monitor":12,"./parser":13,"./playback":14,"./predictor":15,"./renderer":16,"./toolbox":21,"./undomachine":22,"./viewport":23}],7:[function(d,g,i){function b(a){return{data:2,output:1,exec:function(e,f,b){var c=b.pull(),d=b.pull();b.push(a(c,d))}}}function a(a){"string"==typeof a?this.map=h.parse(a):this.map=a,this.reset()}var h=d("./parser"),e=d("./memory"),c=d("./direction"),f={end:{data:0,output:0,exec:function(b,a,c){a.running=!1}},add:b(function(a,b){return b+a}),multiply:b(function(a,b){return b*a}),subtract:b(function(a,b){return b-a}),divide:b(function(a,b){return b/a|0}),mod:b(function(a,b){return b%a}),pop:{data:1,output:0,exec:function(b,c,a){a.pull()}},"pop-unicode":{data:1,output:0,exec:function(d,a,b){var c=b.pull();a.output.push(String.fromCharCode(c))}},"pop-number":{data:1,output:0,exec:function(d,a,b){var c=b.pull();a.output=a.output.concat(String(c).split(""))}},push:{data:0,output:1,argument:!0,exec:function(a,c,b){b.push(a.data)}},"push-unicode":{data:0,output:1,exec:function(d,c,a){var b=c.input.shift();null==b?a.push(-1):a.push(b.charCodeAt(0))}},"push-number":{data:0,output:1,exec:function(f,b,c){for(var a="";b.input.length;){var d=b.input[0];if(/[0-9-+]/.test(d))a+=d,b.input.shift();else{if(a.length>0)break;a="",b.input.shift()}}if(a.length>0){var e=parseInt(a);c.push(e)}else c.push(-1)}},copy:{data:1,output:2,exec:function(b,c,a){a.copy()}},flip:{data:2,output:2,exec:function(b,c,a){a.flip()}},select:{data:0,output:0,argument:!0,exec:function(a,b,c){b.selected=a.data}},move:{data:1,output:0,argument:!0,exec:function(a,b,c){var d=b.memory[a.data],e=c.pull();d.push(e)}},compare:{data:2,output:1,exec:function(d,e,a){var b=a.pull(),c=a.pull();a.push(c>=b?1:0)}},condition:{data:1,output:0,exec:function(c,d,a){var b=a.pull();return 0===b?!0:void 0}}};a.prototype.push=function(a){this.state.input=this.state.input.concat(a.split(""))},a.prototype.shift=function(){var a=this.state.output.join("");return this.state.output=[],a},a.prototype.reset=function(){this.state={x:0,y:0,direction:{x:0,y:1},memory:{},selected:0,input:[],output:[],running:!0},this.updated=[];for(var a=0;28>a;++a)switch(a){case 21:this.state.memory[a]=new e.Queue;break;case 28:this.state.memory[a]=new e.Stack;break;default:this.state.memory[a]=new e.Stack}},a.prototype.next=function(){if(!this.state.running)return!1;var a=this.state.direction,j=c.convertToBits(-a.x,-a.y),b=this.map.get(this.state.x,this.state.y),e=!1;if(null!=b){var g=c.map[b.direction];a.x=c.calculate(a.x,g.x),a.y=c.calculate(a.y,g.y);var k=this.state.selected,h=this.state.memory[k],d=f[b.command];d&&(e=h.canPull(d.data)?!!d.exec(b,this.state,h):!0)}if(!this.state.running)return!1;e&&(a.x*=-1,a.y*=-1),c.process(this.state,this.map,a,j,this.updated,-1);var i=this.map.get(this.state.x,this.state.y);return i&&(this.state.breakpoint=i.breakpoint),this.state.running},a.prototype.trim=function(h){for(var d=0,f=0,a=0;a<this.map.height;++a){for(var b=0,e=0;e<this.map.getWidth(a);++e){var c=this.map.get(e,a);null!=c&&("none"!=c.direction||"none"!=c.command)&&(h&&null==c.directions||h&&0==c.directions.length||(b=e+1))}this.map.map[a]=this.map.map[a].slice(0,b),b>0&&(f=a+1),b>d&&(d=b)}var g=!1;return this.map.width!=d&&(g=!0),this.map.height!=f&&(g=!0),this.map.width=d,this.map.height=f,g},a.CommandMap=f,g.exports=a},{"./direction":4,"./memory":10,"./parser":13}],8:[function(g,c,h){function a(){this.stack=[],this.registerEvents()}var d=["1234567890"].map(function(a){return a.split("")}),e=["qwert","asdfg","zxcvb"].map(function(a){return a.split("")}),b=["qwertQWERT","asdfgASDFG","zxcvbZXCVBN"].map(function(a){return a.split("")}),f={q:["arrow","none"],w:["arrow","up"],e:["command","none"],r:["command","select"],t:["command","move"],a:["arrow","left"],s:["arrow","down"],d:["arrow","right"],f:["command","push"],g:["command","pop"],z:["command","subtract"],x:["command","divide"],c:["command","add"],v:["command","multiply"],b:["command","mod"],Q:["arrow","reverse"],W:["arrow","skip-up"],E:["command","end"],R:["command","condition"],T:["command","compare"],A:["arrow","skip-left"],S:["arrow","skip-down"],D:["arrow","skip-right"],F:["command","copy"],G:["command","flip"],Z:["arrow","horizontal"],X:["arrow","vertical"],C:["command","pop-number"],V:["command","pop-unicode"],B:["command","push-unicode"],N:["command","push-number"]};a.prototype.push=function(a){this.stack.push(a)},a.prototype.pop=function(){return this.stack.pop()},a.prototype.registerEvents=function(){var a=this;document.addEventListener("keypress",function(d){for(var c=d.key||String.fromCharCode(d.charCode),e=a.stack.length-1;e>=0;--e){var b=a.stack[e];if(d.ctrlKey&&(b=a.stack[0]),b&&b.map){if(void 0!=b.map[c])return b.callback(b.map[c]),!1;if(void 0!=b.map[c.toUpperCase()])return b.callback(b.map[c.toUpperCase()]),!1}}})},a.KeyNumberLayout=d,a.KeyLayout=e,a.KeyShiftLayout=b,a.EditorKeyMapping=f,a.createKeyMap=function(d,e){null==e&&(e=b);for(var f={},a=0;a<d.length;++a)for(var c=0;c<d[a].length;++c)f[e[a][c]]=d[a][c];return f},c.exports=a},{}],9:[function(a,c,g){function b(a,b){this.renderer=a,this.element=b,this.init()}var d=a("./tilemap"),e=a("./table"),f=[[{name:"청소",data:"clean"},{name:"명령",data:"command"},{name:"방향",data:"arrow"},{name:"경로",data:"path"},{name:"글자",data:"text"},{name:"배경",data:"highlight"}]];b.prototype.init=function(){var a=this,b=d.fromArray(f).transpose();console.log(b);new e(this.element,b,function(b,c,d,e){return null==c?void b.parentNode.removeChild(b):(b.id="view-"+c.data,b.className="view",b.appendChild(document.createTextNode(c.name)),void b.addEventListener("click",function(){if("clean"==c.data)return void a.trim();var d=a.renderer.canvases.getCanvas(c.data).style;"hidden"==d.visibility?(d.visibility="visible",b.className="view"):(d.visibility="hidden",b.className="view selected")}))})},c.exports=b},{"./table":19,"./tilemap":20}],10:[function(e,d,f){function a(){}function b(){this.data=[]}function c(){this.data=[]}a.prototype.push=function(a){},a.prototype.pull=function(){},a.prototype.canPull=function(a){},a.prototype.copy=function(){},a.prototype.flip=function(){},b.prototype.push=function(a){this.data.push(a)},b.prototype.pull=function(){return this.data.pop()},b.prototype.canPull=function(a){return this.data.length>=a},b.prototype.copy=function(){if(!this.canPull(1))return!1;var a=this.pull();return this.data.push(a),this.data.push(a),!0},b.prototype.flip=function(){if(!this.canPull(2))return!1;var a=this.pull(),b=this.pull();return this.data.push(a),this.data.push(b),!0},c.prototype.push=function(a){this.data.push(a)},c.prototype.pull=function(){return this.data.shift()},c.prototype.canPull=function(a){return this.data.length>=a},c.prototype.copy=function(){if(!this.canPull(1))return!1;var a=this.data[0];return this.data.unshift(a),!0},c.prototype.flip=function(){if(!this.canPull(2))return!1;var a=this.pull(),b=this.pull();return this.data.unshift(a),this.data.unshift(b),!0},d.exports.Memory=a,d.exports.Stack=b,d.exports.Queue=c},{}],11:[function(c,b,d){function a(a,b){this.panes=a,this.buttons=b,this.selected=-1,this.registerEvents()}a.prototype.registerEvents=function(){var a=this;this.buttons.forEach(function(c,b){c.onclick=function(){a.selected==b?a.show(-1):a.show(b)}}),this.update()},a.prototype.show=function(a){this.selected=a,this.update()},a.prototype.update=function(){this.buttons.forEach(function(a,b){this.selected==b?a.className="menu-btn selected":a.className="menu-btn"},this),this.panes.forEach(function(a,b){this.selected==b?a.style.display="block":a.style.display="none"},this)},b.exports=a},{}],12:[function(b,c,e){function a(a){this.interpreter=a}var d=b("./hangul");a.prototype.getStatus=function(){var a="",b=this.interpreter.state;if(b.running){b.direction;a+="실행 중 (위치 "+b.x+", "+b.y+")\n"}else a+="실행 끝\n";for(var c=0;28>c;++c)b.selected==c&&(a+=">> "),a+=d["final"][c]+": ",a+=b.memory[c].data.join(" "),a+="\n";return a},c.exports=a},{"./hangul":5}],13:[function(j,e,q){function o(a){return a>=44032&&55203>=a}function i(h){var c={direction:"none",command:"none",original:h},d=h.charCodeAt();if(!o(d))return c;d-=a.code;var i=d%a["final"].length,e=a["final"][i];d=d/a["final"].length|0;var j=d%a.medial.length,k=a.medial[j];d=d/a.medial.length|0;var l=d%a.initial.length,m=a.initial[l];return c.direction=g[k]||c.direction,c.command=f[m]||c.command,"push"==c.command&&("ㅇ"==e?c.command="push-number":"ㅎ"==e?c.command="push-unicode":c.data=b[e]),"pop"==c.command&&("ㅇ"==e?c.command="pop-number":"ㅎ"==e&&(c.command="pop-unicode")),("select"==c.command||"move"==c.command)&&(c.data=i),c}function n(b){var f=d(h[b.command]||""),i=d(k[b.direction]),e=" ";"push-number"==b.command?(f="ㅂ",e="ㅇ"):"push-unicode"==b.command?(f="ㅂ",e="ㅎ"):"push"==b.command?e=d(c[b.data||0]):"pop-number"==b.command?(f="ㅁ",e="ㅇ"):"pop-unicode"==b.command?(f="ㅁ",e="ㅎ"):("select"==b.command||"move"==b.command)&&(e=d(a["final"][b.data||0]));var j=a.initial.indexOf(f),l=a.medial.indexOf(i),m=a["final"].indexOf(e),g=a.code;return g+=j*a.medial.length*a["final"].length,g+=l*a["final"].length,g+=m,String.fromCharCode(g)}function m(d){for(var e="",b=0;b<d.height;++b){for(var f=0,a=0;a<d.getWidth(b);++a){var c=d.get(a,b);null!=c&&("none"!=c.direction||"none"!=c.command)&&(f=a+1)}for(var a=0;f>a;++a){var c=d.get(a,b);e+=c?c.original:"ㅇ"}e+="\n"}return e.slice(0,-1)}function d(a){return a.charAt(a.length*Math.random()|0)}function p(f){for(var c=f.split("\n"),d=new l(0,c.length),a=0;a<c.length;++a){var e=c[a].split("");d.expand(e.length,0);for(var b=0;b<e.length;++b)d.set(b,a,i(e[b]))}return d}var l=j("./tilemap"),a=j("./hangul"),g={"ㅗ":"up","ㅓ":"left","ㅏ":"right","ㅜ":"down","ㅛ":"skip-up","ㅕ":"skip-left","ㅑ":"skip-right","ㅠ":"skip-down","ㅡ":"horizontal","ㅣ":"vertical","ㅢ":"reverse","ㅐㅔㅒㅖㅘㅙㅚㅝㅞㅟ":"none"},k={};Object.keys(g).forEach(function(a){k[g[a]]=a});var f={"ㅇㄱㄲㅉㅋ":"none","ㅎ":"end","ㄷ":"add","ㄸ":"multiply","ㅌ":"subtract","ㄴ":"divide","ㄹ":"mod","ㅁ":"pop","ㅂ":"push","ㅃ":"copy","ㅍ":"flip","ㅅ":"select","ㅆ":"move","ㅈ":"compare","ㅊ":"condition"},h={};Object.keys(f).forEach(function(a){h[f[a]]=a});var b={" ":0,"ㄱ":2,"ㄴ":2,"ㄷ":3,"ㄹ":5,"ㅁ":4,"ㅂ":4,"ㅅ":2,"ㅈ":3,"ㅊ":4,"ㅋ":3,"ㅌ":4,"ㅍ":4,"ㄲ":4,"ㄳ":4,"ㄵ":5,"ㄶ":5,"ㄺ":7,"ㄻ":9,"ㄼ":9,"ㄽ":7,"ㄾ":9,"ㄿ":9,"ㅀ":8,"ㅄ":6,"ㅆ":4},c={};Object.keys(b).forEach(function(a){null==c[b[a]]&&(c[b[a]]=""),c[b[a]]+=a}),e.exports.parseSyllable=i,e.exports.parse=p,e.exports.encodeSyllable=n,e.exports.encode=m},{"./hangul":5,"./tilemap":20}],14:[function(c,b,d){function a(a,b,c,d){this.interpreter=a,this.renderer=b,this.callback=c,this.resetCallback=d,this.running=!1,this.playing=!1,this.intervalId=-1,this.delay=400,this.times=1,this.registerEvents()}a.prototype.resetInterval=function(){var a=this;-1!=this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(function(){a.running&&a.step()},this.delay)},a.prototype.updateDelay=function(a){var b=document.getElementById("icon-play"+a+"x");this.preElement&&(this.preElement.className="icon",this.preElement=b),b.className="icon selected",this.times=1,1==a&&(this.delay=400),2==a&&(this.delay=20),3==a&&(this.delay=20,this.times=10),this.resetInterval()},a.prototype.registerEvents=function(){var a=this;document.getElementById("icon-play").onclick=function(){document.activeElement.blur(),a.playing=!0,a.running=!0,a.update()},document.getElementById("icon-pause").onclick=function(){document.activeElement.blur(),a.playing&&(a.running=!1,a.update())},document.getElementById("icon-step").onclick=function(){document.activeElement.blur(),a.playing=!0,a.step(!0),a.running=!1,a.update()},document.getElementById("icon-stop").onclick=function(){a.playing=!1,a.running=!1,a.resetCallback(),a.update()},document.getElementById("icon-play1x").onclick=this.updateDelay.bind(this,1),document.getElementById("icon-play2x").onclick=this.updateDelay.bind(this,2),document.getElementById("icon-play3x").onclick=this.updateDelay.bind(this,3),this.preElement=document.getElementById("icon-play1x"),this.resetInterval(),a.update()},a.prototype.update=function(){this.playing?(document.getElementById("icon-stop").className="icon",this.running?(document.getElementById("icon-play").className="icon selected",document.getElementById("icon-pause").className="icon",document.getElementById("icon-step").className="icon disabled"):(document.getElementById("icon-play").className="icon",document.getElementById("icon-pause").className="icon selected",document.getElementById("icon-step").className="icon")):(document.getElementById("icon-stop").className="icon disabled",document.getElementById("icon-play").className="icon",document.getElementById("icon-pause").className="icon disabled")},a.prototype.step=function(b){if(this.interpreter&&this.renderer){for(var a=0;a<this.times;++a){if(this.interpreter.next(),this.interpreter.state.breakpoint){this.running=!1,this.update();break}if(!this.interpreter.state.running){this.running=!1,this.stopped=!0,this.update();break}if(b)break}this.renderer.render(),this.callback&&this.callback()}},b.exports=a},{}],15:[function(d,f,j){function b(a){this.id=a.id,this.segment=a.segment,this.x=a.x,this.y=a.y,this.direction={},this.direction.x=a.direction.x,this.direction.y=a.direction.y,this.selected=a.selected,this.memory=a.memory.slice(),this.seek=a.seek||!1,this.merge=!0,this.visit=0}function c(a){"string"==typeof a?this.map=g.parse(a):this.map=a,this.reset(),this.updated=[]}var g=d("./parser"),h=d("./tilemap"),a=d("./direction"),e=d("./interpreter");b.init=function(){for(var a=[],c=0;28>c;++c)a.push(0);return new b({id:0,segment:0,x:0,y:0,direction:{x:0,y:1},selected:0,memory:a})},b.prototype.diff=function(a){return this.memory.map(function(b,c){return b-a.memory[c]})},c.prototype.reset=function(){this.segments=[],this.mergeCandidates=[],this.stack=[],this.headingMap=new h(this.map.width,this.map.height);var a=b.init(),c=[];c.push(a),this.segments.push(c),this.stack.push(a)},c.prototype.postCheck=function(){for(;this.mergeCandidates.length;){var c=this.mergeCandidates.shift();if(c.merge){for(var h=this.segments[c.segment];c.otherwiseSet.length;){var f=c.otherwiseSet.shift(),e=this.segments[f.segment],d=c.direction,g=a.convertToBits(-d.x,-d.y);if(!(c.segment>=f.segment)){0==e.length&&e.push(f);for(var b;e.length;)b=e.shift(),b.segment=c.segment,b.id=h.length,h.push(b),b.before&&a.process({x:b.before.x,y:b.before.y},this.map,b.direction,g,this.updated,b.segment),d=b.direction,g=a.convertToBits(-d.x,-d.y)}}b&&b.then&&a.process({x:b.x,y:b.y},this.map,b.then.direction,g,this.updated,b.segment),c.merge=!1}}},c.prototype.next=function(){if(0===this.stack.length)return!1;var g=this.stack.pop(),c=new b(g);c.before=g,c.seek||(g.then=c);var m=this.segments[c.segment],d=c.direction,l=a.convertToBits(-d.x,-d.y),f=this.map.get(c.x,c.y),h=this.headingMap.get(c.x,c.y);null==h&&(h={},this.headingMap.set(c.x,c.y,h));var n=!1,k=!1;if(null!=f){var o=a.map[f.direction];d.x=a.calculate(d.x,o.x),d.y=a.calculate(d.y,o.y);var i=e.CommandMap[f.command];if(null!=i)if(c.memory[c.selected]>=i.data){if(c.memory[c.selected]-=i.data,c.memory[c.selected]+=i.output,"select"==f.command&&(c.selected=f.data),"move"==f.command&&c.memory[f.data]++,"end"==f.command&&(k=!0),"condition"==f.command){var j=new b(c);j.direction.x=-d.x,j.direction.y=-d.y,g.otherwise=j,this.processCursor(j,m,f,h,k,!0,l)}g.merge=!1}else d.x=-d.x,d.y=-d.y,n=!0,g.seek||(g.otherwiseSet||(g.otherwiseSet=[],this.mergeCandidates.push(g)),g.otherwiseSet.push(c))}return this.processCursor(c,m,f,h,k,n,l),this.stack.length>0},c.prototype.processCursor=function(b,g,m,f,i,j,l){var c,d=!1,h=b.direction,e=a.convertToBits(h.x,h.y,!0);if(f[e]){c=f[e],c.visit++;var k=!b.memory.every(function(d,e){var a=c.memory[e]-d;return 0>=a&&d>=8&&(b.memory[e]=8),c.visit>16?0>=a:0==a});c.memory=b.memory.slice(),d=k,k||(i=!0)}c&&j&&(b.id=c.id,b.segment=c.segment),i||(d||(j&&(b.id=-1,b.segment=this.segments.length,g=[],this.segments.push(g)),b.id++,g.push(b),f[e]=b),this.stack.push(b)),a.process(b,this.map,h,l,this.updated,b.segment,!1),c&&d&&(b.id=c.id,b.segment=c.segment),b.seek=d};var i={end:"halt",add:"add",multiply:"mul",subtract:"sub",divide:"div",mod:"mod",pop:"pop","pop-number":"popnum","pop-unicode":"popchar",push:"push","push-number":"pushnum","push-unicode":"pushchar",copy:"dup",flip:"swap",select:"sel",move:"mov",compare:"cmp",condition:"brz"};c.prototype.assembly=function(){for(var f=[],j=[],g=[],o=0;o<this.segments.length;++o)for(var l=this.segments[o],h=0;h<l.length;++h){var c=l[h];c.index=g.length;var p=this.headingMap.get(c.x,c.y),b=this.map.get(c.x,c.y);if(null!=b)if("none"!=b.command){var s=e.CommandMap[b.command],t=a.convertToBits(-c.direction.x,-c.direction.y,!0);if(p[t]&&s.data>0){var d=["brpop"+s.data,p[t]];g.push(d),f.push(d)}var d=[i[b.command]];"push"==b.command&&(d[1]=b.data),"select"==b.command&&(d[1]=b.data),"move"==b.command&&(d[1]=b.data),"condition"==b.command&&(d[1]=c.otherwise,f.push(d)),g.push(d)}else if(h==l.length-1){var r=a.map[b.direction],u=a.calculate(c.direction.x,r.x),v=a.calculate(c.direction.y,r.y),w=a.convertToBits(u,v,!0),q=p[w];if(!q)continue;var d=["jmp",q];g.push(d),f.push(d)}}for(var k=0;k<f.length;++k){var m=f[k][1].index;-1==j.indexOf(m)&&j.push(m),f[k][1]="p"+j.indexOf(m)}var n=[];g.forEach(function(b,c){var a=j.indexOf(c);-1!=a&&n.push(":p"+a),n.push(b.join(" "))}),console.log(n.join("\n"))},f.exports=c},{"./direction":4,"./interpreter":7,"./parser":13,"./tilemap":20}],16:[function(c,h,n){function f(a,b,c,e,f,d,h,g){"undefined"==typeof g&&(g=!0),"undefined"==typeof d&&(d=5),a.beginPath(),a.moveTo(b+d,c),a.lineTo(b+e-d,c),a.quadraticCurveTo(b+e,c,b+e,c+d),a.lineTo(b+e,c+f-d),a.quadraticCurveTo(b+e,c+f,b+e-d,c+f),a.lineTo(b+d,c+f),a.quadraticCurveTo(b,c+f,b,c+f-d),a.lineTo(b,c+d),a.quadraticCurveTo(b,c,b+d,c),a.closePath(),g&&a.stroke(),h&&a.fill()}var i=c("./tilemap"),m=c("./canvaslayer"),d=c("./hangul"),g=c("./spriteloader"),a=100,j={up:[2,0],left:[2,1],right:[3,0],down:[3,1],"skip-up":[2,2],"skip-left":[2,3],"skip-right":[3,2],"skip-down":[3,3],none:[0,0],horizontal:[1,0],vertical:[1,1],reverse:[0,1]},k={up:[2,1],left:[1,2],right:[3,0],down:[2,2],"up-left":[1,1],"up-right":[0,2],"down-left":[2,0],"down-right":[0,0],horizontal:[1,0],vertical:[0,1],"skip-horizontal":[3,1],"skip-vertical":[3,2]},l=[[0,0],[1,0],[0,1],[1,1],[0,2],[1,2]],e={none:[0,0],end:[1,0],add:[2,0],multiply:[3,0],subtract:[2,1],divide:[3,1],mod:[1,1],push:[0,1],"push-unicode":[4,1],"push-number":[4,0],pop:[0,2],"pop-unicode":[4,3],"pop-number":[4,2],copy:[1,2],flip:[2,2],select:[3,2],move:[0,3],compare:[1,3],condition:[2,3],breakpoint:[3,3]},b=function(b,a,c){var d=this;this.interpreter=a,this.map=a.map,this.width=c||50,this.canvases=new m(b,["background","highlight","text","path","arrow","command"],this.width*(this.map.width+1),this.width*(this.map.height+1)),this.sprites=new g(function(){d.reset()}),this.sprites.load("path","img/path.png"),this.sprites.load("arrow","img/arrow.png"),this.sprites.load("command","img/command.png")};b.prototype.reset=function(){this.cacheMap=new i(this.interpreter.map.width+1,this.interpreter.map.height+1),this.canvases.setSize(this.width*(this.interpreter.map.width+1),this.width*(this.interpreter.map.height+1)),this.canvases.forEach(function(a){a.font=.6*this.width+"px sans-serif",a.textAlign="center",a.textBaseline="middle",a.fillStyle="#000"},this),this.canvases.get("background").fillRect(0,0,this.canvases.width,this.canvases.height),this.canvases.get("text").fillStyle="#555";for(var a=0;a<=this.interpreter.map.height;++a)for(var b=0;b<=this.interpreter.map.width;++b)this.cacheMap.set(b,a,{}),this.updateTile(b,a)},b.prototype.redraw=function(){for(var a=0;a<=this.interpreter.map.height;++a)for(var b=0;b<=this.interpreter.map.width;++b)this.updateTile(b,a)},b.prototype.updateTile=function(i,o){var r=this.interpreter.state,b=this.interpreter.map.get(i,o),c=this.cacheMap.get(i,o);this.canvases.forEach(function(a){a.save(),a.translate(i*this.width,o*this.width)},this);var q=r&&r.x==i&&r.y==o;if(c.highlighted!=q){c.highlighted=q;var n=this.canvases.get("highlight");n.clearRect(0,0,this.width,this.width),q?n.fillStyle="#666":n.fillStyle="#222",f(n,1,1,this.width-2,this.width-2,4,!0)}if(b){if(c.text!=b.original){c.text=b.original;var v=this.canvases.get("text");v.clearRect(0,0,this.width,this.width),v.fillText(b.original,this.width/2,this.width/2)}if(b.directions&&c.directions!=Object.keys(b.directions).length){c.directions=Object.keys(b.directions).length,this.canvases.get("path").clearRect(0,0,this.width,this.width);for(var p=b.directions.length-1;p>=0;--p){
var s=b.directions[p];null!=s&&s.forEach(function(d){var b=l[p%6],c=k[d],e=this.sprites.get("path");this.canvases.get("path").drawImage(e,(4*b[0]+c[0])*a,(3*b[1]+c[1])*a,a,a,0,0,this.width,this.width)},this)}}if(c.direction!=b.direction){c.direction=b.direction;var t=this.canvases.get("arrow");t.clearRect(0,0,this.width,this.width);var u=j[b.direction];t.drawImage(this.sprites.get("arrow"),u[0]*a,u[1]*a,a,a,0,0,this.width,this.width)}if(c.command!=b.command||c.data!=b.data||c.breakpoint!=b.breakpoint){c.command=b.command,c.data=b.data,c.breakpoint=b.breakpoint;var g=this.canvases.get("command"),h=e[b.command];if(g.clearRect(0,0,this.width,this.width),g.drawImage(this.sprites.get("command"),h[0]*a,h[1]*a,a,a,0,0,this.width,this.width),b.breakpoint&&(h=e.breakpoint,g.drawImage(this.sprites.get("command"),h[0]*a,h[1]*a,a,a,0,0,this.width,this.width)),null!=b.data){var m="";"push"==b.command&&(m=b.data),"select"==b.command&&(m=d["final"][b.data]),"move"==b.command&&(m=d["final"][b.data]),g.font=.3*this.width+"px sans-serif",g.textAlign="right",g.textBaseline="bottom",g.fillStyle="#fff",g.fillText(m,this.width-3,this.width-3)}}}this.canvases.forEach(function(a){a.restore()},this)},b.prototype.render=function(){for(var a=this.interpreter.state;this.interpreter.updated.length>0;){var b=this.interpreter.updated.shift();this.updateTile(b.x,b.y)}a&&this.updateTile(a.x,a.y)},h.exports=b},{"./canvaslayer":2,"./hangul":5,"./spriteloader":18,"./tilemap":20}],17:[function(c,b,d){function a(a,b){this.viewport=a,this.clickCallback=b,this.registerEvents(),this.tolerance=6}a.prototype.registerEvents=function(){function f(b){return document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",g),Math.abs(d)<a.tolerance&&Math.abs(e)<a.tolerance&&a.clickCallback&&a.clickCallback(b),!1}function g(f){var g=f.pageX-b,h=f.pageY-c;a.viewport.scrollTop-=h,a.viewport.scrollLeft-=g,d-=g,e-=h,b=f.pageX,c=f.pageY}var a=this,b=0,c=0,d=0,e=0;this.viewport.addEventListener("mousedown",function(a){return b=a.pageX,c=a.pageY,d=0,e=0,document.addEventListener("mouseup",f),document.addEventListener("mousemove",g),a.preventDefault(),!1})},b.exports=a},{}],18:[function(c,b,d){function a(a){this.sprites=[],this.loadCount=0,this.callback=a}a.prototype.get=function(a){return this.sprites[a]},a.prototype.load=function(b,c){var a=new Image;a.src=c,a.onload=function(){this.sprites[b]=a,this.handleDone()}.bind(this),this.loadCount++},a.prototype.handleDone=function(){this.loadCount--,0==this.loadCount&&this.callback&&this.callback()},b.exports=a},{}],19:[function(b,c,e){function a(a,b,c){this.viewport=a,this.tilemap=b,this.updateCallback=c,this.reset()}var d=b("./tilemap");a.prototype.reset=function(){this.domMap=new d(this.tilemap.width,this.tilemap.height),this.createNodes()},a.prototype.createNodes=function(){for(;this.viewport.firstChild;)this.viewport.removeChild(this.viewport.firstChild);for(var a=0;a<this.domMap.height;++a){var d=document.createElement("tr");this.viewport.appendChild(d);for(var b=0;b<this.domMap.width;++b){var c=document.createElement("td");d.appendChild(c),c.tx=b,c.ty=a,this.domMap.set(b,a,c),this.updateNode(b,a)}}},a.prototype.updateNode=function(a,b){var c=this.domMap.get(a,b),d=this.tilemap.get(a,b);this.updateCallback(c,d,a,b)},c.exports=a},{"./tilemap":20}],20:[function(c,b,d){function a(a,b){this.width=a,this.height=b,this.map=null,this.clear()}a.prototype.clear=function(){this.map=[];for(var a=0;a<this.height;++a){var b=[];this.map[a]=b}},a.prototype.expand=function(c,d){var a,b,e=(this.width,this.height);for(c>this.width&&(this.width=c),d>this.height&&(this.height=d),a=0;e>a;++a)b=this.map[a];for(a=e;a<this.height;++a)b=[],this.map[a]=b},a.prototype.getWidth=function(a){return 0>a||a>=this.height?0:this.map[a].length},a.prototype.get=function(a,b){return 0>b||b>=this.height?null:0>a||a>=this.width?null:this.map[b][a]},a.prototype.set=function(a,b,c){if(0>b||b>=this.height)throw new Error("TileMap out of bounds");if(0>a||a>=this.width)throw new Error("TileMap out of bounds");this.map[b][a]=c},a.prototype.transpose=function(){for(var d=new a(this.height,this.width),b=0;b<this.width;++b)for(var c=0;c<this.height;++c)d.set(c,b,this.get(b,c));return d},a.fromArray=function(c){for(var e=new a(0,c.length),b=0;b<c.length;++b){e.expand(c[b].length,0);for(var d=0;d<c[b].length;++d)e.set(d,b,c[b][d])}return e},b.exports=a},{}],21:[function(b,d,g){function c(a){this.selected={type:"arrow",name:"none"},this.oldNode=null,this.renderer=a,this.scrollPane=null,this.generateTable()}var a=b("./keyboard"),e=b("./tilemap"),f=b("./table");c.prototype.generateTable=function(){for(var g=this,c=new e(0,a.KeyShiftLayout.length),b=0;b<c.height;++b){c.expand(a.KeyShiftLayout[b].length,0);for(var d=0;d<a.KeyShiftLayout[b].length;++d){var h=a.KeyShiftLayout[b][d];c.set(d,b,{value:a.EditorKeyMapping[h],key:h})}}var i=document.getElementById("toolbox-table");this.table=new f(i,c,function(a,b){return b&&b.value?(a.id=b.value.join("-"),a.className=b.value[0],a.appendChild(document.createTextNode(b.key)),void a.addEventListener("click",function(){g.changeSelected.apply(g,b.value)})):void a.parentNode.removeChild(a)})},c.prototype.changeSelected=function(a,b){this.oldNode&&(this.oldNode.className=this.selected.type),this.selected.type=a,this.selected.name=b;var c=document.getElementById(a+"-"+b);c.className=a+" selected",this.oldNode=c},d.exports=c},{"./keyboard":8,"./table":19,"./tilemap":20}],22:[function(c,b,d){function a(a){this.undoStack=[],this.redoStack=[],this.callback=a}a.prototype.run=function(a){this.redoStack=[],a.exec(),this.undoStack.push(a),this.callback&&this.callback()},a.prototype.canUndo=function(){return this.undoStack.length>=1},a.prototype.undo=function(){if(!this.canUndo())return!1;var a=this.undoStack.pop();return a.undo(),this.redoStack.push(a),this.callback&&this.callback(),a},a.prototype.canRedo=function(){return this.redoStack.length>=1},a.prototype.redo=function(){if(!this.canRedo())return!1;var a=this.redoStack.pop();return a.exec(),this.undoStack.push(a),this.callback&&this.callback(),a},a.prototype.reset=function(){this.undoStack=[],this.redoStack=[],this.callback&&this.callback()},b.exports=a},{}],23:[function(b,d,f){function a(a,b,c,d,f,g,h){this.element=a,this.toolbox=b,this.renderer=c,this.contextmenu=d,this.undomachine=f,this.scrollpane=new e(a,this.handleMouseClick.bind(this)),this.checkCallback=g,this.clickCallback=h,this.hookEvents()}var e=b("./scrollpane"),c=b("./action");b("./parser");a.prototype.hookEvents=function(){this.element.addEventListener("contextmenu",this.handleContext.bind(this))},a.prototype.handleMouseClick=function(f){var h=0,g=0,k=0,j=0,d=this.element;do h+=d.offsetLeft-d.scrollLeft,g+=d.offsetTop-d.scrollTop,d=d.offsetParent;while(d);h+=this.renderer.canvases.viewport.offsetLeft,g+=this.renderer.canvases.viewport.offsetTop,h+=document.body.scrollLeft,g+=document.body.scrollTop,k=f.pageX-h,j=f.pageY-g,f.preventDefault();var a=k/this.renderer.width|0,b=j/this.renderer.width|0;if(!this.checkCallback(a,b))return!1;if(0>a)return!1;if(0>b)return!1;if(a>this.renderer.map.width)return!1;if(b>this.renderer.map.height)return!1;this.renderer.map.expand(a+1,b+1),(a+1>=this.renderer.map.width||b+1>=this.renderer.map.height)&&this.renderer.reset();var e=this.renderer.map.get(a,b)||{direction:"none",command:"none",original:" "};if(0==f.button){var i=this.toolbox.selected;"arrow"==i.type?this.undomachine.run(new c(e,a,b,{direction:i.name},this.renderer,this.clickCallback.bind(this,a,b,e))):this.undomachine.run(new c(e,a,b,{command:i.name},this.renderer,this.clickCallback.bind(this,a,b,e)))}else if(2==f.button){var l=a*this.renderer.width+h,m=(b+1)*this.renderer.width+g;this.contextmenu.tileX=a,this.contextmenu.tileY=b,this.contextmenu.tile=e,this.contextmenu.show(l,m)}},a.prototype.handleContext=function(a){return a.preventDefault(),!1},d.exports=a},{"./action":1,"./parser":13,"./scrollpane":17}]},{},[6]);
//# sourceMappingURL=aheuichem.min.js.map